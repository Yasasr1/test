{
    "alias": "test",
    "server": {
        "issuer": "https://localhost:9443/oauth2/token",
        "jwks_uri": "https://localhost:9443/oauth2/jwks",
        "authorization_endpoint": "https://localhost:9443/oauth2/authorize",
        "token_endpoint": "https://localhost:9443/oauth2/token",
        "userinfo_endpoint": "https://localhost:9443/oauth2/userinfo",
        "acr_values": "acr1"
    },
    "client": {
        "client_id": "ZVQ2f6Vli21Ynv05_FMbnZk9C7sa",
        "client_secret": "7UXxJgrdo2O6NyVKKV2E_2k6Yy4a"
    },
    "client2": {
        "client_id": "448cTHaPJIOfwNFMivx47JS7XA4a",
        "client_secret": "Qn_89rKNl8Ad91KcUz5J6VK6jrQa"
    },
    "client_secret_post": {
        "client_id": "ZVQ2f6Vli21Ynv05_FMbnZk9C7sa",
        "client_secret": "7UXxJgrdo2O6NyVKKV2E_2k6Yy4a"
    },
    "browser": [
        {
            "match": "https://localhost:9443/oauth2/authorize*",
            "tasks": [
                {
                    "task": "Login",
                    "match": "https://localhost:9443/authenticationendpoint/login*",
                    "optional": true,
                    "commands": [
                        [
                            "text",
                            "id",
                            "usernameUserInput",
                            "admin"
                        ],
                        [
                            "text",
                            "id",
                            "password",
                            "admin"
                        ],
                        [
                            "click",
                            "xpath",
                            "/html/body/main/div/div[2]/div/form/div[9]/div[2]/button"
                        ],
                        [
                            "wait",
                            "contains",
                            "test/callback",
                            10
                        ]
                    ]
                },
                {
                    "task": "Verify",
                    "match": "https://localhost.emobix.co.uk:8443/test/a/test/callback*"
                }
            ]
        }
    ],
    "override": {
        "oidcc-ensure-request-with-valid-pkce-succeeds": {
            "browser": [
                {
                    "match": "https://localhost:9443/oauth2/authorize*",
                    "tasks": [
                        {
                            "task": "Login",
                            "match": "https://localhost:9443/authenticationendpoint/login*",
                            "optional": true,
                            "commands": [
                                [
                                    "text",
                                    "id",
                                    "usernameUserInput",
                                    "admin"
                                ],
                                [
                                    "text",
                                    "id",
                                    "password",
                                    "admin"
                                ],
                                [
                                    "click",
                                    "xpath",
                                    "/html/body/main/div/div[2]/div/form/div[9]/div[2]/button"
                                ],
                                [
                                    "wait",
                                    "contains",
                                    "oauth2_consent",
                                    10
                                ]
                            ]
                        },
                        {
                            "task": "Consent",
                            "match": "https://localhost:9443/authenticationendpoint/oauth2_consent*",
                            "optional": true,
                            "commands": [
                                [
                                    "wait",
                                    "id",
                                    "approve",
                                    10
                                ],
                                [
                                    "click",
                                    "id",
                                    "approve"
                                ],
                                [
                                    "wait",
                                    "contains",
                                    "callback",
                                    10
                                ]
                            ]
                        },
                        {
                            "task": "Verify",
                            "match": "https://localhost.emobix.co.uk:8443/test/a/test/callback*"
                        }
                    ]
                }
            ]
        },
        "oidcc-refresh-token": {
            "browser": [
                {
                    "match": "https://localhost:9443/oauth2/authorize*",
                    "tasks": [
                        {
                            "task": "Login",
                            "match": "https://localhost:9443/authenticationendpoint/login*",
                            "optional": true,
                            "commands": [
                                [
                                    "text",
                                    "id",
                                    "usernameUserInput",
                                    "admin"
                                ],
                                [
                                    "text",
                                    "id",
                                    "password",
                                    "admin"
                                ],
                                [
                                    "click",
                                    "xpath",
                                    "/html/body/main/div/div[2]/div/form/div[9]/div[2]/button"
                                ],
                                [
                                    "wait",
                                    "contains",
                                    "oauth2_consent",
                                    10
                                ]
                            ]
                        },
                        {
                            "task": "Consent",
                            "match": "https://localhost:9443/authenticationendpoint/oauth2_consent*",
                            "optional": true,
                            "commands": [
                                [
                                    "wait",
                                    "id",
                                    "approve",
                                    10
                                ],
                                [
                                    "click",
                                    "id",
                                    "approve"
                                ],
                                [
                                    "wait",
                                    "contains",
                                    "callback",
                                    10
                                ]
                            ]
                        },
                        {
                            "task": "Verify",
                            "match": "https://localhost.emobix.co.uk:8443/test/a/test/callback*"
                        }
                    ]
                }
            ]
        },
        "oidcc-ensure-registered-redirect-uri": {
            "browser": [
                {
                    "match": "https://localhost:9443/oauth2/authorize*",
                    "tasks": [
                        {
                            "task": "Verify error page",
                            "match": "https://localhost:9443/authenticationendpoint/oauth2_error.do*",
                            "commands": [
                                [
                                    "wait",
                                    "xpath",
                                    "//*",
                                    10,
                                    "Identity Server",
                                    "update-image-placeholder"
                                ]
                            ]
                        }
                    ]
                }
            ]
        },
        "oidcc-ensure-request-object-with-redirect-uri": {
            "browser": [
                {
                    "match": "https://localhost:9443/oauth2/authorize*",
                    "tasks": [
                        {
                            "task": "Verify error",
                            "match": "https://localhost:9443/authenticationendpoint/oauth2_error.do*",
                            "commands": [
                                [
                                    "wait",
                                    "xpath",
                                    "//*",
                                    10,
                                    "Identity Server",
                                    "update-image-placeholder"
                                ]
                            ]
                        }
                    ]
                }
            ]
        },
        "oidcc-prompt-login": {
            "browser": [
                {
                    "match": "https://localhost:9443/oauth2/authorize*",
                    "tasks": [
                        {
                            "task": "Login",
                            "match": "https://localhost:9443/authenticationendpoint/login*",
                            "optional": true,
                            "commands": [
                                [
                                    "wait",
                                    "xpath",
                                    "/html/body/main/div/div[2]/h3",
                                    10,
                                    "Sign In",
                                    "update-image-placeholder-optional"
                                ],
                                [
                                    "text",
                                    "id",
                                    "usernameUserInput",
                                    "admin"
                                ],
                                [
                                    "text",
                                    "id",
                                    "password",
                                    "admin"
                                ],
                                [
                                    "click",
                                    "xpath",
                                    "/html/body/main/div/div[2]/div/form/div[9]/div[2]/button"
                                ],
                                [
                                    "wait",
                                    "contains",
                                    "test/callback",
                                    10
                                ]
                            ]
                        },
                        {
                            "task": "Consent",
                            "match": "https://localhost:9443/authenticationendpoint/oauth2_consent*",
                            "optional": true,
                            "commands": [
                                [
                                    "wait",
                                    "id",
                                    "approve",
                                    10
                                ],
                                [
                                    "click",
                                    "id",
                                    "rememberApproval",
                                    "optional"
                                ],
                                [
                                    "click",
                                    "id",
                                    "approve"
                                ],
                                [
                                    "wait",
                                    "contains",
                                    "callback",
                                    10
                                ]
                            ]
                        },
                        {
                            "task": "Verify",
                            "match": "https://localhost.emobix.co.uk:8443/test/a/test/callback*"
                        }
                    ]
                }
            ]
        },
        "oidcc-max-age-1": {
            "browser": [
                {
                    "match": "https://localhost:9443/oauth2/authorize*",
                    "tasks": [
                        {
                            "task": "Login",
                            "match": "https://localhost:9443/authenticationendpoint/login*",
                            "optional": true,
                            "commands": [
                                [
                                    "wait",
                                    "xpath",
                                    "/html/body/main/div/div[2]/h3",
                                    10,
                                    "Sign In",
                                    "update-image-placeholder-optional"
                                ],
                                [
                                    "text",
                                    "id",
                                    "usernameUserInput",
                                    "admin"
                                ],
                                [
                                    "text",
                                    "id",
                                    "password",
                                    "admin"
                                ],
                                [
                                    "click",
                                    "xpath",
                                    "/html/body/main/div/div[2]/div/form/div[9]/div[2]/button"
                                ],
                                [
                                    "wait",
                                    "contains",
                                    "test/callback",
                                    10
                                ]
                            ]
                        },
                        {
                            "task": "Consent",
                            "match": "https://localhost:9443/authenticationendpoint/oauth2_consent*",
                            "optional": true,
                            "commands": [
                                [
                                    "wait",
                                    "id",
                                    "approve",
                                    10
                                ],
                                [
                                    "click",
                                    "id",
                                    "rememberApproval",
                                    "optional"
                                ],
                                [
                                    "click",
                                    "id",
                                    "approve"
                                ],
                                [
                                    "wait",
                                    "contains",
                                    "callback",
                                    10
                                ]
                            ]
                        },
                        {
                            "task": "Verify",
                            "match": "https://localhost.emobix.co.uk:8443/test/a/test/callback*"
                        }
                    ]
                }
            ]
        }
    }
}